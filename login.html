<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>🔐 Login - HCP</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="login-box">
    <h2>🔐 Login Portal</h2>
    <form id="loginForm">
      <select id="role" required>
        <option value="">Select Role</option>
        <option value="Super Admin">Super Admin</option>
        <option value="Store Incharge">Store Incharge</option>
        <option value="Section Head">Section Head</option>
      </select>

      <input type="text" id="cnic" placeholder="Enter CNIC" required />
      <input type="password" id="password" placeholder="Enter Password" required />

      <div class="checkbox-row">
        <input type="checkbox" onclick="togglePassword()" /> Show Password
      </div>

      <button type="submit">🔓 Login</button>
    </form>
  </div>

  <script>
    function togglePassword() {
      const pwd = document.getElementById("password");
      pwd.type = pwd.type === "password" ? "text" : "password";
    }

    document.getElementById("loginForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const cnic = document.getElementById("cnic").value;
      const pass = document.getElementById("password").value;
      const role = document.getElementById("role").value;

      if (role === "Super Admin") {
        if (cnic === "34501-8971113-7" && pass === "Asad@2723") {
          window.location.href = "dashboard.html";
        } else {
          alert("❌ Invalid Super Admin credentials");
        }
        return;
      }

      const users = JSON.parse(localStorage.getItem("users")) || [];
      const found = users.find(u => u.cnic === cnic && u.password === pass && u.role === role);

      if (found) {
        if (role === "Store Incharge") window.location.href = "store_dashboard.html";
        else if (role === "Section Head") window.location.href = "section_dashboard.html";
        else alert("✅ Login successful but role page not found");
      } else {
        alert("❌ User not found or incorrect details");
      }
    });
  </script>
</body>
</html>
