<!-- stock_out.html -->
<!DOCTYPE html>
<html lang="ur">
<head>
  <meta charset="UTF-8">
  <title>📤 اسٹاک آؤٹ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <section>
    <h2>📤 اسٹاک آؤٹ فارم</h2>
    <form id="stockOutForm">
      <label>آئٹم کا نام:</label>
      <input type="text" name="item" required>
      
      <label>مقدار:</label>
      <input type="number" name="qty" required>

      <button type="submit">آؤٹ کریں</button>
    </form>

    <h3>📉 موجودہ اسٹاک</h3>
    <table id="outTable">
      <thead><tr><th>آئٹم</th><th>باقی مقدار</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <script>
    const outForm = document.getElementById("stockOutForm");
    const outTable = document.querySelector("#outTable tbody");

    const stock = JSON.parse(localStorage.getItem("stock") || "{}");

    function saveStock() {
      localStorage.setItem("stock", JSON.stringify(stock));
    }

    function renderTable() {
      outTable.innerHTML = "";
      for (let item in stock) {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${item}</td><td>${stock[item].qty}</td>`;
        outTable.appendChild(tr);
      }
    }

    outForm.addEventListener("submit", e => {
      e.preventDefault();
      const item = outForm.item.value.trim();
      const qty = parseInt(outForm.qty.value);

      if (!stock[item] || stock[item].qty < qty) {
        alert("مطلوبہ مقدار دستیاب نہیں");
        return;
      }

      stock[item].qty -= qty;
      saveStock();
      renderTable();
      outForm.reset();
    });

    renderTable();
  </script>
</body>
</html>
