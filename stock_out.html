<!-- stock_out.html -->
<!DOCTYPE html>
<html lang="ur">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“¤ Ø§Ø³Ù¹Ø§Ú© Ø¢ÙˆÙ”Ù¹</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <section>
    <h2>ğŸ“¤ Ø§Ø³Ù¹Ø§Ú© Ø¢ÙˆÙ”Ù¹ ÙØ§Ø±Ù…</h2>
    <form id="stockOutForm">
      <label>Ø¢Ø¦Ù¹Ù… Ú©Ø§ Ù†Ø§Ù…:</label>
      <input type="text" name="item" required>
      
      <label>Ù…Ù‚Ø¯Ø§Ø±:</label>
      <input type="number" name="qty" required>

      <button type="submit">Ø¢ÙˆÙ”Ù¹ Ú©Ø±ÛŒÚº</button>
    </form>

    <h3>ğŸ“‰ Ù…ÙˆØ¬ÙˆØ¯Û Ø§Ø³Ù¹Ø§Ú©</h3>
    <table id="outTable">
      <thead><tr><th>Ø¢Ø¦Ù¹Ù…</th><th>Ø¨Ø§Ù‚ÛŒ Ù…Ù‚Ø¯Ø§Ø±</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <script>
    const outForm = document.getElementById("stockOutForm");
    const outTable = document.querySelector("#outTable tbody");

    const stock = JSON.parse(localStorage.getItem("stock") || "{}");

    function saveStock() {
      localStorage.setItem("stock", JSON.stringify(stock));
    }

    function renderTable() {
      outTable.innerHTML = "";
      for (let item in stock) {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${item}</td><td>${stock[item].qty}</td>`;
        outTable.appendChild(tr);
      }
    }

    outForm.addEventListener("submit", e => {
      e.preventDefault();
      const item = outForm.item.value.trim();
      const qty = parseInt(outForm.qty.value);

      if (!stock[item] || stock[item].qty < qty) {
        alert("Ù…Ø·Ù„ÙˆØ¨Û Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø³ØªÛŒØ§Ø¨ Ù†ÛÛŒÚº");
        return;
      }

      stock[item].qty -= qty;
      saveStock();
      renderTable();
      outForm.reset();
    });

    renderTable();
  </script>
</body>
</html>
