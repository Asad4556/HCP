<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>📂 Upload Voucher Format - HCP</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding: 20px; background-color: #f4f4f4; }
    .upload-box { background: white; padding: 20px; border-radius: 10px; max-width: 500px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.2); }
    input[type="file"] { margin-bottom: 10px; }
    table { width: 100%; margin-top: 20px; border-collapse: collapse; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  </style>
</head>
<body>
  <div class="upload-box">
    <h2>📂 Upload Voucher Format (PDF, DOCX, XLSX)</h2>
    <form id="uploadForm">
      <input type="file" id="voucherFile" accept=".pdf,.doc,.docx,.xls,.xlsx" required>
      <button type="submit">💾 Save Format</button>
    </form>

    <h3>📁 Uploaded Files</h3>
    <table id="fileTable">
      <thead>
        <tr>
          <th>Sr#</th>
          <th>File Name</th>
          <th>Download</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const uploadForm = document.getElementById('uploadForm');
    const voucherFile = document.getElementById('voucherFile');
    const fileTable = document.querySelector('#fileTable tbody');

    function loadFiles() {
      const files = JSON.parse(localStorage.getItem('uploadedVoucherFiles')) || [];
      fileTable.innerHTML = '';
      files.forEach((file, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${i + 1}</td>
          <td>${file.name}</td>
          <td><a href="${file.url}" download="${file.name}">⬇️ Download</a></td>
        `;
        fileTable.appendChild(tr);
      });
    }

    uploadForm.addEventListener('submit', e => {
      e.preventDefault();
      const file = voucherFile.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          let files = JSON.parse(localStorage.getItem('uploadedVoucherFiles')) || [];
          files.push({ name: file.name, url: reader.result });
          localStorage.setItem('uploadedVoucherFiles', JSON.stringify(files));
          loadFiles();
          alert('✅ File uploaded successfully!');
        };
        reader.readAsDataURL(file);
      }
    });

    loadFiles();
  </script>
</body>
</html>
